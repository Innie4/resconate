{"ast":null,"code":"import _objectSpread from\"C:/Users/Inimfon Udoh/Resconate-Portfolio/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";// API utility functions\nexport const apiUrl=endpoint=>{const baseUrl=process.env.REACT_APP_API_URL||'';return\"\".concat(baseUrl).concat(endpoint);};// Token management\nexport const getToken=()=>{return localStorage.getItem('authToken')||sessionStorage.getItem('authToken');};export const getEmployeeToken=()=>{return localStorage.getItem('employeeToken')||sessionStorage.getItem('employeeToken');};export const setToken=function(token){let remember=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;if(remember){localStorage.setItem('authToken',token);}else{sessionStorage.setItem('authToken',token);}};export const setEmployeeToken=function(token){let remember=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;if(remember){localStorage.setItem('employeeToken',token);}else{sessionStorage.setItem('employeeToken',token);}};export const clearTokens=()=>{localStorage.removeItem('authToken');localStorage.removeItem('employeeToken');sessionStorage.removeItem('authToken');sessionStorage.removeItem('employeeToken');};// API fetch with authentication\nexport const apiFetch=async function(endpoint){let options=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};const token=getToken()||getEmployeeToken();const headers=_objectSpread({'Content-Type':'application/json'},options.headers);if(token){headers['Authorization']=\"Bearer \".concat(token);}const response=await fetch(apiUrl(endpoint),_objectSpread(_objectSpread({},options),{},{headers,credentials:'include'}));if(response.status===401){// Token expired or invalid, clear tokens\nclearTokens();if(window.location.pathname!=='/hr-login'&&window.location.pathname!=='/employee-login'){window.location.href='/hr-login';}}return response;};export const fetchProjects=async()=>{try{const response=await fetch(apiUrl('/api/projects'));if(!response.ok)throw new Error('Failed to fetch projects');return await response.json();}catch(error){console.error('Error fetching projects:',error);return[];}};export const fetchTestimonials=async()=>{try{const response=await fetch(apiUrl('/api/testimonials'));if(!response.ok)throw new Error('Failed to fetch testimonials');return await response.json();}catch(error){console.error('Error fetching testimonials:',error);return[];}};","map":{"version":3,"names":["apiUrl","endpoint","baseUrl","process","env","REACT_APP_API_URL","concat","getToken","localStorage","getItem","sessionStorage","getEmployeeToken","setToken","token","remember","arguments","length","undefined","setItem","setEmployeeToken","clearTokens","removeItem","apiFetch","options","headers","_objectSpread","response","fetch","credentials","status","window","location","pathname","href","fetchProjects","ok","Error","json","error","console","fetchTestimonials"],"sources":["C:/Users/Inimfon Udoh/Resconate-Portfolio/frontend/src/utils/api.js"],"sourcesContent":["// API utility functions\r\nexport const apiUrl = (endpoint) => {\r\n  const baseUrl = process.env.REACT_APP_API_URL || '';\r\n  return `${baseUrl}${endpoint}`;\r\n};\r\n\r\n// Token management\r\nexport const getToken = () => {\r\n  return localStorage.getItem('authToken') || sessionStorage.getItem('authToken');\r\n};\r\n\r\nexport const getEmployeeToken = () => {\r\n  return localStorage.getItem('employeeToken') || sessionStorage.getItem('employeeToken');\r\n};\r\n\r\nexport const setToken = (token, remember = false) => {\r\n  if (remember) {\r\n    localStorage.setItem('authToken', token);\r\n  } else {\r\n    sessionStorage.setItem('authToken', token);\r\n  }\r\n};\r\n\r\nexport const setEmployeeToken = (token, remember = false) => {\r\n  if (remember) {\r\n    localStorage.setItem('employeeToken', token);\r\n  } else {\r\n    sessionStorage.setItem('employeeToken', token);\r\n  }\r\n};\r\n\r\nexport const clearTokens = () => {\r\n  localStorage.removeItem('authToken');\r\n  localStorage.removeItem('employeeToken');\r\n  sessionStorage.removeItem('authToken');\r\n  sessionStorage.removeItem('employeeToken');\r\n};\r\n\r\n// API fetch with authentication\r\nexport const apiFetch = async (endpoint, options = {}) => {\r\n  const token = getToken() || getEmployeeToken();\r\n  const headers = {\r\n    'Content-Type': 'application/json',\r\n    ...options.headers,\r\n  };\r\n  \r\n  if (token) {\r\n    headers['Authorization'] = `Bearer ${token}`;\r\n  }\r\n\r\n  const response = await fetch(apiUrl(endpoint), {\r\n    ...options,\r\n    headers,\r\n    credentials: 'include',\r\n  });\r\n\r\n  if (response.status === 401) {\r\n    // Token expired or invalid, clear tokens\r\n    clearTokens();\r\n    if (window.location.pathname !== '/hr-login' && window.location.pathname !== '/employee-login') {\r\n      window.location.href = '/hr-login';\r\n    }\r\n  }\r\n\r\n  return response;\r\n};\r\n\r\nexport const fetchProjects = async () => {\r\n  try {\r\n    const response = await fetch(apiUrl('/api/projects'));\r\n    if (!response.ok) throw new Error('Failed to fetch projects');\r\n    return await response.json();\r\n  } catch (error) {\r\n    console.error('Error fetching projects:', error);\r\n    return [];\r\n  }\r\n};\r\n\r\nexport const fetchTestimonials = async () => {\r\n  try {\r\n    const response = await fetch(apiUrl('/api/testimonials'));\r\n    if (!response.ok) throw new Error('Failed to fetch testimonials');\r\n    return await response.json();\r\n  } catch (error) {\r\n    console.error('Error fetching testimonials:', error);\r\n    return [];\r\n  }\r\n};\r\n\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}